# è¿åŠ¨ä¼šç®¡ç†ç³»ç»Ÿ - Laravelç‰ˆæœ¬

è¿™æ˜¯athletics-app (Ruby on Rails)çš„å®Œæ•´Laravelå¤åˆ»ç‰ˆæœ¬ã€‚

## é¡¹ç›®æ¦‚è¿°

æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å­¦æ ¡è¿åŠ¨ä¼šç®¡ç†å¹³å°ï¼Œæ”¯æŒä»è¿åŠ¨å‘˜æŠ¥ååˆ°èµ›äº‹å®‰æ’çš„å…¨æµç¨‹ç®¡ç†ã€‚

## å·²å®Œæˆçš„æ ¸å¿ƒæ¶æ„

### âœ… 1. æ•°æ®åº“ç»“æ„ï¼ˆ100%å®Œæˆï¼‰

æ‰€æœ‰æ•°æ®è¡¨å·²åˆ›å»ºå¹¶è¿ç§»æˆåŠŸï¼š

- `competitions` - è¿åŠ¨ä¼šåŸºæœ¬ä¿¡æ¯
- `events` - è¿åŠ¨é¡¹ç›®ï¼ˆå¾„èµ›/ç”°èµ›ï¼‰
- `grades` - å¹´çº§
- `klasses` - ç­çº§
- `athletes` - è¿åŠ¨å‘˜
- `competition_events` - è¿åŠ¨ä¼šä¸é¡¹ç›®å…³è”è¡¨
- `athlete_competition_events` - è¿åŠ¨å‘˜æŠ¥åè¡¨
- `heats` - åˆ†ç»„ä¿¡æ¯
- `lanes` - èµ›é“
- `lane_athletes` - èµ›é“è¿åŠ¨å‘˜å…³è”
- `schedules` - æ—¥ç¨‹å®‰æ’
- `results` - æ¯”èµ›æˆç»©

### âœ… 2. æ¨¡å‹å±‚ï¼ˆ100%å®Œæˆï¼‰

æ‰€æœ‰12ä¸ªModelå·²åˆ›å»ºå¹¶é…ç½®ï¼š

1. **Competition** - å®Œæ•´çš„å…³è”å…³ç³»å’Œä¸šåŠ¡æ–¹æ³•
2. **Event** - é¡¹ç›®ç±»å‹åˆ¤æ–­ï¼ˆå¾„èµ›/ç”°èµ›/æ¥åŠ›ï¼‰
3. **Grade** - å¹´çº§ç®¡ç†ï¼Œå…¨å±€æ’åº
4. **Klass** - ç­çº§ç®¡ç†ï¼ŒåŒ…å«full_nameå±æ€§
5. **Athlete** - è¿åŠ¨å‘˜ï¼ŒåŒ…å«ç¼–å·ç”Ÿæˆé€»è¾‘
6. **CompetitionEvent** - è¿åŠ¨ä¼šé¡¹ç›®å…³è”
7. **AthleteCompetitionEvent** - è¿åŠ¨å‘˜æŠ¥å
8. **Heat** - åˆ†ç»„ï¼Œæ”¯æŒå¾„èµ›å’Œç”°èµ›
9. **Lane** - èµ›é“ï¼Œæ”¯æŒæ¥åŠ›é¡¹ç›®
10. **LaneAthlete** - èµ›é“è¿åŠ¨å‘˜ï¼Œæ”¯æŒæ£’æ¬¡
11. **Schedule** - æ—¥ç¨‹ï¼ŒåŒ…å«å†²çªæ£€æµ‹
12. **Result** - æˆç»©è®°å½•

### âœ… 3. ç§å­æ•°æ®ï¼ˆ100%å®Œæˆï¼‰

å·²åˆ›å»º30ä¸ªè¿åŠ¨é¡¹ç›®ï¼š
- ç”·å­å¾„èµ›ï¼š8é¡¹ï¼ˆ100ç±³ã€200ç±³ã€400ç±³ã€800ç±³ã€1500ç±³ã€110ç±³æ ã€4Ã—100ç±³æ¥åŠ›ã€4Ã—400ç±³æ¥åŠ›ï¼‰
- å¥³å­å¾„èµ›ï¼š8é¡¹ï¼ˆ100ç±³ã€200ç±³ã€400ç±³ã€800ç±³ã€1500ç±³ã€100ç±³æ ã€4Ã—100ç±³æ¥åŠ›ã€4Ã—400ç±³æ¥åŠ›ï¼‰
- ç”·å­ç”°èµ›ï¼š6é¡¹ï¼ˆè·³é«˜ã€è·³è¿œã€ä¸‰çº§è·³è¿œã€é“…çƒã€é“é¥¼ã€æ ‡æªï¼‰
- å¥³å­ç”°èµ›ï¼š6é¡¹ï¼ˆè·³é«˜ã€è·³è¿œã€ä¸‰çº§è·³è¿œã€é“…çƒã€é“é¥¼ã€æ ‡æªï¼‰

### âœ… 4. è·¯ç”±é…ç½®ï¼ˆ100%å®Œæˆï¼‰

æ‰€æœ‰RESTfulè·¯ç”±å·²é…ç½®ï¼š
- è¿åŠ¨ä¼šCRUD
- å¹´çº§ç®¡ç†
- è¿åŠ¨å‘˜ç®¡ç†ï¼ˆå«å¯¼å…¥å¯¼å‡ºï¼‰
- åˆ†ç»„ç®¡ç†ï¼ˆå«è‡ªåŠ¨åˆ†ç»„ï¼‰
- æ—¥ç¨‹ç®¡ç†ï¼ˆå«æ‰¹é‡åˆ›å»ºï¼‰

### âœ… 5. ä¾èµ–åŒ…ï¼ˆ100%å®Œæˆï¼‰

- Laravel 12.x
- maatwebsite/excel - Excelå¯¼å…¥å¯¼å‡º
- Tailwind CSS + DaisyUI (å·²å®‰è£…)

## éœ€è¦å®Œæˆçš„éƒ¨åˆ†

### ğŸ“ æ§åˆ¶å™¨å®ç°ï¼ˆ30%å®Œæˆï¼‰

#### âœ… å·²å®Œæˆ
- CompetitionController - åŸºæœ¬CRUD

#### ğŸ”² å¾…å®Œæˆ
1. **GradeController** - å¹´çº§ç®¡ç†
2. **AthleteController** - è¿åŠ¨å‘˜ç®¡ç†æ ¸å¿ƒ
   - index() - è¿åŠ¨å‘˜åˆ—è¡¨
   - create/store() - æ·»åŠ è¿åŠ¨å‘˜
   - edit/update() - ç¼–è¾‘è¿åŠ¨å‘˜
   - destroy() - åˆ é™¤è¿åŠ¨å‘˜
   - **generateNumbers()** - è‡ªåŠ¨ç”Ÿæˆç¼–å·ï¼ˆé‡è¦ï¼‰
   - **import()** - Excelæ‰¹é‡å¯¼å…¥ï¼ˆé‡è¦ï¼‰
   - **downloadTemplate()** - ä¸‹è½½å¯¼å…¥æ¨¡æ¿

3. **HeatController** - åˆ†ç»„ç®¡ç†æ ¸å¿ƒ
   - index() - åˆ†ç»„åˆ—è¡¨
   - show() - åˆ†ç»„è¯¦æƒ…
   - edit/update() - ç¼–è¾‘åˆ†ç»„
   - **generateAll()** - è‡ªåŠ¨ç”Ÿæˆå¾„èµ›åˆ†ç»„ï¼ˆæ ¸å¿ƒç®—æ³•ï¼‰
   - **generateFieldEvents()** - ç”Ÿæˆç”°èµ›åˆ†ç»„
   - è¿åŠ¨å‘˜è°ƒæ•´åŠŸèƒ½

4. **ScheduleController** - æ—¥ç¨‹ç®¡ç†
   - index() - æ—¥ç¨‹åˆ—è¡¨
   - create/store() - åˆ›å»ºæ—¥ç¨‹
   - edit/update() - ç¼–è¾‘æ—¥ç¨‹
   - **bulkNew()** - æ‰¹é‡åˆ›å»ºé¡µé¢
   - **bulkCreate()** - æ‰¹é‡åˆ›å»ºæ—¥ç¨‹
   - **print()** - æ‰“å°æ—¥ç¨‹è¡¨

5. **EventController** - é¡¹ç›®ç®¡ç†

### ğŸ¨ è§†å›¾å±‚ï¼ˆ0%å®Œæˆï¼‰

éœ€è¦åˆ›å»ºæ‰€æœ‰Bladeè§†å›¾æ–‡ä»¶ï¼š

#### å¸ƒå±€æ–‡ä»¶
- `resources/views/layouts/app.blade.php` - ä¸»å¸ƒå±€ï¼ˆä½¿ç”¨DaisyUIï¼‰

#### Competitionè§†å›¾
- `index.blade.php` - è¿åŠ¨ä¼šåˆ—è¡¨
- `create.blade.php` - åˆ›å»ºè¿åŠ¨ä¼š
- `edit.blade.php` - ç¼–è¾‘è¿åŠ¨ä¼š
- `show.blade.php` - è¿åŠ¨ä¼šè¯¦æƒ…ï¼ˆä»ªè¡¨æ¿ï¼‰

#### Gradeè§†å›¾
- `index.blade.php` - å¹´çº§ç®¡ç†

#### Athleteè§†å›¾
- `index.blade.php` - è¿åŠ¨å‘˜åˆ—è¡¨
- `create.blade.php` - æ·»åŠ è¿åŠ¨å‘˜
- `edit.blade.php` - ç¼–è¾‘è¿åŠ¨å‘˜

#### Heatè§†å›¾
- `index.blade.php` - åˆ†ç»„åˆ—è¡¨
- `show.blade.php` - åˆ†ç»„è¯¦æƒ…
- `edit.blade.php` - ç¼–è¾‘åˆ†ç»„

#### Scheduleè§†å›¾
- `index.blade.php` - æ—¥ç¨‹åˆ—è¡¨
- `create.blade.php` - åˆ›å»ºæ—¥ç¨‹
- `edit.blade.php` - ç¼–è¾‘æ—¥ç¨‹
- `bulk-new.blade.php` - æ‰¹é‡åˆ›å»º
- `print.blade.php` - æ‰“å°ç‰ˆ

## æ ¸å¿ƒç®—æ³•å®ç°è¦ç‚¹

### 1. è¿åŠ¨å‘˜ç¼–å·ç”Ÿæˆç®—æ³•
```php
// æŒ‰å¹´çº§ â†’ ç­çº§ â†’ æ€§åˆ«(ç”·â†’å¥³)æ’åºåç”Ÿæˆ001å¼€å§‹çš„ç¼–å·
$athletes = $competition->grades()
    ->with('klasses.athletes')
    ->orderBy('order')
    ->get()
    ->flatMap(function($grade) {
        return $grade->klasses->flatMap(function($klass) {
            return $klass->athletes->sortBy(function($athlete) {
                return $athlete->gender === 'ç”·' ? 0 : 1;
            });
        });
    });

$athletes->each(function($athlete, $index) {
    $athlete->update(['number' => sprintf('%03d', $index + 1)]);
});
```

### 2. å¾„èµ›è‡ªåŠ¨åˆ†ç»„ç®—æ³•
```php
// éæ¥åŠ›é¡¹ç›®ï¼šæŒ‰å¹´çº§åˆ†ç»„ï¼Œæ¯ç»„æœ€å¤štrack_lanesäººï¼Œéšæœºæ‰“ä¹±
// æ¥åŠ›é¡¹ç›®ï¼šæŒ‰å¹´çº§â†’ç­çº§åˆ†ç»„ï¼Œæ¯é˜Ÿ4äºº
```

### 3. Excelå¯¼å…¥å®ç°
```php
use Maatwebsite\Excel\Facades\Excel;

// è¯»å–Excelæ–‡ä»¶
$data = Excel::toArray(new AthletesImport, $request->file('file'));

// é€è¡Œå¤„ç†ï¼š
// - æŸ¥æ‰¾/åˆ›å»ºå¹´çº§
// - æŸ¥æ‰¾/åˆ›å»ºç­çº§
// - åˆ›å»ºè¿åŠ¨å‘˜
// - å…³è”æŠ¥åé¡¹ç›®
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
composer install
npm install
```

### 2. é…ç½®æ•°æ®åº“
```bash
cp .env.example .env
php artisan key:generate
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥

### 3. è¿è¡Œè¿ç§»å’Œç§å­
```bash
php artisan migrate
php artisan db:seed
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
php artisan serve
npm run dev
```

è®¿é—® http://localhost:8000

## ä¸‹ä¸€æ­¥å®ç°å»ºè®®

### ä¼˜å…ˆçº§1ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
1. å®ŒæˆAthleteControllerçš„import()å’ŒgenerateNumbers()
2. å®ŒæˆHeatControllerçš„generateAll()
3. åˆ›å»ºCompetitionçš„showè§†å›¾ï¼ˆä»ªè¡¨æ¿ï¼‰

### ä¼˜å…ˆçº§2ï¼ˆåŸºç¡€é¡µé¢ï¼‰
1. å®Œæˆæ‰€æœ‰CRUDè§†å›¾
2. å®ç°è¿åŠ¨å‘˜åˆ—è¡¨å’Œç¼–è¾‘
3. å®ç°åˆ†ç»„æŸ¥çœ‹

### ä¼˜å…ˆçº§3ï¼ˆé«˜çº§åŠŸèƒ½ï¼‰
1. æ—¥ç¨‹ç®¡ç†
2. æ‰¹é‡æ“ä½œ
3. æ‰“å°åŠŸèƒ½

## åŸé¡¹ç›®å¯¹ç…§

- åŸé¡¹ç›®ï¼ˆRailsï¼‰ï¼š`/Users/neekko33/Developer/playground/athletics-app`
- æœ¬é¡¹ç›®ï¼ˆLaravelï¼‰ï¼š`/Users/neekko33/Developer/playground/athletics`

## æŠ€æœ¯æ ˆå¯¹æ¯”

| åŠŸèƒ½ | Railsç‰ˆæœ¬ | Laravelç‰ˆæœ¬ |
|------|----------|------------|
| æ¡†æ¶ | Rails 8.0 | Laravel 12.x |
| æ•°æ®åº“ | SQLite3 | SQLite/MySQL |
| å‰ç«¯ | Tailwind + DaisyUI | Tailwind + DaisyUI |
| Excel | Roo gem | maatwebsite/excel |
| æ¨¡æ¿ | ERB | Blade |

## å¼€å‘è¿›åº¦

- [x] æ•°æ®åº“è®¾è®¡å’Œè¿ç§»
- [x] æ¨¡å‹å±‚å®ç°
- [x] ç§å­æ•°æ®
- [x] è·¯ç”±é…ç½®
- [x] CompetitionControlleråŸºç¡€å®ç°
- [ ] å…¶ä»–æ§åˆ¶å™¨å®ç°
- [ ] è§†å›¾å±‚å®ç°
- [ ] Excelå¯¼å…¥å¯¼å‡º
- [ ] è‡ªåŠ¨åˆ†ç»„ç®—æ³•
- [ ] æ—¥ç¨‹ç®¡ç†

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹åŸRailsé¡¹ç›®çš„å®ç°ä»£ç ä½œä¸ºå‚è€ƒã€‚

---

**é¡¹ç›®çŠ¶æ€**ï¼šåŸºç¡€æ¶æ„å·²å®Œæˆï¼Œæ ¸å¿ƒä¸šåŠ¡é€»è¾‘å¾…å®ç°  
**é¢„è®¡å®Œæˆæ—¶é—´**ï¼šéœ€è¦é¢å¤–8-12å°æ—¶å®Œæˆæ‰€æœ‰æ§åˆ¶å™¨å’Œè§†å›¾  
**å½“å‰å¯è¿è¡Œ**ï¼šâœ… æ•°æ®åº“å·²å°±ç»ªï¼Œå¯ä»¥å¼€å§‹å®ç°ä¸šåŠ¡é€»è¾‘
