# ğŸƒ è¿åŠ¨ä¼šç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Laravel + DaisyUI çš„ç°ä»£åŒ–è¿åŠ¨ä¼šç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒè¿åŠ¨å‘˜ç®¡ç†ã€èµ›äº‹åˆ†ç»„ã€æ—¥ç¨‹å®‰æ’ã€ç§©åºå†Œç”Ÿæˆç­‰å®Œæ•´åŠŸèƒ½ã€‚

## âš¡ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- PHP >= 8.2
- Composer
- Node.js >= 18
- SQLite

### 2. å®‰è£…é¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®
cd athletics

# å®‰è£… PHP ä¾èµ–
composer install

# å®‰è£…å‰ç«¯ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒ
cp .env.example .env
php artisan key:generate

# è¿è¡Œè¿ç§»å’Œç§å­æ•°æ®
php artisan migrate
php artisan db:seed

# åˆ›å»ºç®¡ç†å‘˜è´¦å·
php artisan admin:create
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# ç»ˆç«¯1ï¼šå¯åŠ¨ Laravel æœåŠ¡
php artisan serve

# ç»ˆç«¯2ï¼šå¯åŠ¨ Vite å‰ç«¯æ„å»º
npm run dev
```

è®¿é—®ï¼šhttp://localhost:8000

### 4. ç™»å½•ç³»ç»Ÿ

ä½¿ç”¨åˆšæ‰åˆ›å»ºçš„ç®¡ç†å‘˜è´¦å·ç™»å½•

## ğŸ“š åŠŸèƒ½æ¨¡å—

### âœ… è¿åŠ¨ä¼šç®¡ç†
- åˆ›å»º/ç¼–è¾‘/åˆ é™¤è¿åŠ¨ä¼š
- é…ç½®æ¯”èµ›æ—¥æœŸã€æ¯æ—¥æ—¶é—´æ®µã€è·‘é“æ•°é‡
- è¿åŠ¨ä¼šè¯¦æƒ…ä»ªè¡¨æ¿

### âœ… æ¯”èµ›é¡¹ç›®ç®¡ç†
- é¢„ç½® 30 ä¸ªæ ‡å‡†é¡¹ç›®ï¼ˆå¾„èµ› + ç”°èµ›ï¼‰
- è‡ªå®šä¹‰é¡¹ç›®ï¼ˆåç§°ã€ç±»å‹ã€æ€§åˆ«ã€æœ€å¤§äººæ•°ã€å¹³å‡ç”¨æ—¶ï¼‰
- é¡¹ç›®åˆ†ç±»å±•ç¤º

### âœ… å¹´çº§ç­çº§ç®¡ç†
- æ·»åŠ å‚èµ›å¹´çº§
- æ¯ä¸ªå¹´çº§ä¸‹ç®¡ç†ç­çº§
- è‡ªå®šä¹‰æ’åº

### âœ… è¿åŠ¨å‘˜ç®¡ç†
- æ‰‹åŠ¨æ·»åŠ /ç¼–è¾‘è¿åŠ¨å‘˜
- Excel æ‰¹é‡å¯¼å…¥
- è‡ªåŠ¨ç”Ÿæˆè¿åŠ¨å‘˜ç¼–å·
- ä¸‹è½½å¯¼å…¥æ¨¡æ¿

### âœ… èµ›äº‹åˆ†ç»„
- å¾„èµ›è‡ªåŠ¨åˆ†ç»„ï¼ˆæŒ‰å¹´çº§ã€è·‘é“æ•°ï¼‰
- ç”°èµ›è‡ªåŠ¨åˆ†ç»„
- æ¥åŠ›é¡¹ç›®æŒ‰ç­çº§åˆ†ç»„
- æ‰‹åŠ¨è°ƒæ•´åˆ†ç»„å’Œé“æ¬¡

### âœ… æ—¥ç¨‹å®‰æ’
- å•ä¸ªæ—¥ç¨‹åˆ›å»º
- æ‰¹é‡æ·»åŠ æ—¥ç¨‹ï¼ˆè‡ªåŠ¨è®¡ç®—æ—¶é—´é—´éš”ï¼‰
- æ ¼å¼åŒ–æ—¥ç¨‹æŸ¥çœ‹ï¼ˆæŒ‰æ—¥æœŸ/å¹´çº§/æ€§åˆ«åˆ†ç»„ï¼‰
- å†²çªæ£€æµ‹

### âœ… ç§©åºå†Œç”Ÿæˆ
- ä¸€é”®ç”Ÿæˆ Word æ ¼å¼ç§©åºå†Œ
- åŒ…å«ï¼šç«èµ›æ—¥ç¨‹ã€ç­çº§åå•ã€ç«èµ›åˆ†ç»„
- ä½¿ç”¨æ¨¡æ¿æ–‡ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰æ ¼å¼

### âœ… ç”¨æˆ·è®¤è¯
- å®‰å…¨çš„ç™»å½•ç³»ç»Ÿ
- é€Ÿç‡é™åˆ¶é˜²æš´åŠ›ç ´è§£
- Session ä¿æŠ¤
- è®°ä½æˆ‘åŠŸèƒ½

## ï¿½ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
athletics/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Console/Commands/        # Artisan å‘½ä»¤
â”‚   â”‚   â””â”€â”€ CreateAdminUser.php  # åˆ›å»ºç®¡ç†å‘˜
â”‚   â”œâ”€â”€ Helpers/                 # è¾…åŠ©ç±»
â”‚   â”‚   â””â”€â”€ ChineseHelper.php    # ä¸­æ–‡è½¬æ¢å·¥å…·
â”‚   â”œâ”€â”€ Http/Controllers/        # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ AuthController.php
â”‚   â”‚   â”œâ”€â”€ CompetitionController.php
â”‚   â”‚   â”œâ”€â”€ EventController.php
â”‚   â”‚   â”œâ”€â”€ GradeController.php
â”‚   â”‚   â”œâ”€â”€ AthleteController.php
â”‚   â”‚   â”œâ”€â”€ HeatController.php
â”‚   â”‚   â””â”€â”€ ScheduleController.php
â”‚   â”œâ”€â”€ Models/                  # Eloquent æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Competition.php
â”‚   â”‚   â”œâ”€â”€ Event.php
â”‚   â”‚   â”œâ”€â”€ Grade.php
â”‚   â”‚   â”œâ”€â”€ Klass.php
â”‚   â”‚   â”œâ”€â”€ Athlete.php
â”‚   â”‚   â”œâ”€â”€ CompetitionEvent.php
â”‚   â”‚   â”œâ”€â”€ AthleteCompetitionEvent.php
â”‚   â”‚   â”œâ”€â”€ Heat.php
â”‚   â”‚   â”œâ”€â”€ Lane.php
â”‚   â”‚   â”œâ”€â”€ LaneAthlete.php
â”‚   â”‚   â”œâ”€â”€ Schedule.php
â”‚   â”‚   â””â”€â”€ Result.php
â”‚   â””â”€â”€ Services/                # ä¸šåŠ¡æœåŠ¡
â”‚       â””â”€â”€ ScheduleBookService.php
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ migrations/              # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ seeders/                 # ç§å­æ•°æ®
â”‚       â””â”€â”€ CompleteDataSeeder.php
â”œâ”€â”€ resources/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ app.css             # Tailwind CSS
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ app.js
â”‚   â””â”€â”€ views/                  # Blade æ¨¡æ¿
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â””â”€â”€ login.blade.php
â”‚       â”œâ”€â”€ layouts/
â”‚       â”‚   â”œâ”€â”€ app.blade.php
â”‚       â”‚   â””â”€â”€ print.blade.php
â”‚       â”œâ”€â”€ competitions/
â”‚       â”œâ”€â”€ events/
â”‚       â”œâ”€â”€ grades/
â”‚       â”œâ”€â”€ athletes/
â”‚       â”œâ”€â”€ heats/
â”‚       â””â”€â”€ schedules/
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ web.php                 # è·¯ç”±å®šä¹‰
â””â”€â”€ public/
    â”œâ”€â”€ word_template.docx      # ç§©åºå†Œæ¨¡æ¿
    â””â”€â”€ images/
```

### å¸¸ç”¨å‘½ä»¤

```bash
# åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼ˆäº¤äº’å¼ï¼‰
php artisan admin:create

# åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼ˆå‘½ä»¤è¡Œï¼‰
php artisan admin:create --name=ç®¡ç†å‘˜ --email=admin@example.com --password=12345678

# è¿è¡Œè¿ç§»
php artisan migrate

# é‡ç½®æ•°æ®åº“å¹¶å¡«å……ç§å­æ•°æ®
php artisan migrate:fresh --seed

# ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆ135ä¸ªè¿åŠ¨å‘˜ï¼‰
php artisan db:seed --class=CompleteDataSeeder

# æ¸…é™¤ç¼“å­˜
php artisan cache:clear
php artisan config:clear
php artisan view:clear
```

### æŠ€æœ¯æ ˆ

- **åç«¯**: Laravel 11
- **æ•°æ®åº“**: SQLite
- **å‰ç«¯**: Blade + Tailwind CSS + DaisyUI
- **æ„å»ºå·¥å…·**: Vite
- **ä¾èµ–åŒ…**:
  - `maatwebsite/excel` - Excel å¯¼å…¥å¯¼å‡º
  - `phpoffice/phpword` - Word æ–‡æ¡£ç”Ÿæˆ

## ğŸ“– æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### 1. è¿åŠ¨å‘˜è‡ªåŠ¨ç¼–å·

æŒ‰ **å¹´çº§ â†’ ç­çº§ â†’ æ€§åˆ«ï¼ˆç”·â†’å¥³ï¼‰** é¡ºåºç”Ÿæˆç¼–å·ï¼š
```
001, 002, 003 ...
```

### 2. å¾„èµ›è‡ªåŠ¨åˆ†ç»„

- éæ¥åŠ›é¡¹ç›®ï¼šæŒ‰å¹´çº§åˆ†ç»„ï¼Œæ¯ç»„æœ€å¤š N äººï¼ˆN = è·‘é“æ•°ï¼‰
- æ¥åŠ›é¡¹ç›®ï¼šæŒ‰ç­çº§åˆ†ç»„ï¼Œæ¯é˜Ÿ 4 äºº
- è‡ªåŠ¨æ‰“ä¹±é¡ºåºï¼Œéšæœºåˆ†é…é“æ¬¡

### 3. æ‰¹é‡æ—¥ç¨‹å®‰æ’

- é€‰æ‹©å¤šä¸ªåˆ†ç»„
- è®¾ç½®èµ·å§‹æ—¶é—´å’Œé—´éš”
- è‡ªåŠ¨è®¡ç®—æ¯ä¸ªåˆ†ç»„çš„å¼€å§‹æ—¶é—´
- æ”¯æŒå†²çªæ£€æµ‹

### 4. ç§©åºå†Œç”Ÿæˆ

ä½¿ç”¨ Word æ¨¡æ¿æ–‡ä»¶ï¼ˆ`public/word_template.docx`ï¼‰ï¼Œæ”¯æŒä»¥ä¸‹å ä½ç¬¦ï¼š

```
${competition_name}     - è¿åŠ¨ä¼šåç§°
${start_date}          - å¼€å§‹æ—¥æœŸ
${end_date}            - ç»“æŸæ—¥æœŸ
${generate_date}       - ç”Ÿæˆæ—¥æœŸ
${schedule_content}    - ç«èµ›æ—¥ç¨‹
${class_roster}        - ç­çº§åå•
${heat_groups}         - ç«èµ›åˆ†ç»„
```

## ğŸ” å®‰å…¨ç‰¹æ€§

- âœ… æ‰€æœ‰è·¯ç”±éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®
- âœ… CSRF ä¿æŠ¤
- âœ… å¯†ç åŠ å¯†å­˜å‚¨ï¼ˆbcryptï¼‰
- âœ… é€Ÿç‡é™åˆ¶ï¼ˆ5æ¬¡å¤±è´¥åé”å®š60ç§’ï¼‰
- âœ… Session fixation é˜²æŠ¤
- âœ… è®°ä½æˆ‘åŠŸèƒ½ï¼ˆ7å¤©ï¼‰

## ï¿½ æ³¨æ„äº‹é¡¹

### Excel å¯¼å…¥æ ¼å¼

CSV æ–‡ä»¶éœ€è¦åŒ…å«ä»¥ä¸‹åˆ—ï¼ˆæ— è¡¨å¤´ï¼‰ï¼š

| å¹´çº§ | ç­çº§ | å§“å | æ€§åˆ« |
|------|------|------|------|
| ä¸ƒå¹´çº§ | 1ç­ | å¼ ä¸‰ | ç”· |
| ä¸ƒå¹´çº§ | 1ç­ | æå›› | å¥³ |

### Word æ¨¡æ¿æ–‡ä»¶

ç¡®ä¿ `public/word_template.docx` å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®ï¼š
- å¿…é¡»æ˜¯ `.docx` æ ¼å¼ï¼ˆä¸æ”¯æŒ `.doc`ï¼‰
- åŒ…å«æ‰€éœ€çš„å ä½ç¬¦å˜é‡

## ğŸ› æ•…éšœæ’é™¤

### 1. PHPWord æŠ¥é”™ "Invalid or uninitialized Zip object"

**åŸå› **: æ¨¡æ¿æ–‡ä»¶æ˜¯ `.doc` æ ¼å¼  
**è§£å†³**: ç”¨ Word æ‰“å¼€ï¼Œå¦å­˜ä¸º `.docx` æ ¼å¼

### 2. ç™»å½•åè·³è½¬åˆ°ç™»å½•é¡µ

**åŸå› **: Session é…ç½®é—®é¢˜  
**è§£å†³**: 
```bash
php artisan config:clear
php artisan cache:clear
```

### 3. Vite èµ„æºåŠ è½½å¤±è´¥

**åŸå› **: å‰ç«¯æœåŠ¡æœªå¯åŠ¨  
**è§£å†³**: ç¡®ä¿è¿è¡Œ `npm run dev`

### 4. Excel å¯¼å…¥å¤±è´¥

**åŸå› **: æ–‡ä»¶æ ¼å¼æˆ–åˆ—æ•°ä¸åŒ¹é…  
**è§£å†³**: ä¸‹è½½æ¨¡æ¿æ–‡ä»¶ï¼ŒæŒ‰æ ¼å¼å¡«å†™

## ğŸ“Š æ•°æ®åº“å…³ç³»

```
Competition (è¿åŠ¨ä¼š)
  â”œâ”€â”€ grades (å¹´çº§)
  â”‚     â””â”€â”€ klasses (ç­çº§)
  â”‚           â””â”€â”€ athletes (è¿åŠ¨å‘˜)
  â””â”€â”€ competitionEvents (æ¯”èµ›é¡¹ç›®å…³è”)
        â”œâ”€â”€ event (é¡¹ç›®)
        â”œâ”€â”€ athleteCompetitionEvents (æŠ¥å)
        â””â”€â”€ heats (åˆ†ç»„)
              â”œâ”€â”€ lanes (é“æ¬¡)
              â”‚     â””â”€â”€ laneAthletes (é“æ¬¡è¿åŠ¨å‘˜)
              â””â”€â”€ schedule (æ—¥ç¨‹)
                    â””â”€â”€ results (æˆç»©)
```

## ğŸ¯ å…¸å‹ä½¿ç”¨æµç¨‹

1. **åˆ›å»ºè¿åŠ¨ä¼š** â†’ è®¾ç½®æ—¥æœŸã€è·‘é“æ•°
2. **æ·»åŠ å¹´çº§ç­çº§** â†’ ä¸ƒå¹´çº§1ç­ã€ä¸ƒå¹´çº§2ç­...
3. **å¯¼å…¥è¿åŠ¨å‘˜** â†’ Excel æ‰¹é‡å¯¼å…¥
4. **ç”Ÿæˆç¼–å·** â†’ è‡ªåŠ¨æŒ‰è§„åˆ™ç¼–å·
5. **æ·»åŠ é¡¹ç›®** â†’ é€‰æ‹©å‚èµ›é¡¹ç›®
6. **è¿åŠ¨å‘˜æŠ¥å** â†’ ä¸ºé¡¹ç›®æ·»åŠ è¿åŠ¨å‘˜
7. **ç”Ÿæˆåˆ†ç»„** â†’ è‡ªåŠ¨åˆ†ç»„å’Œåˆ†é…é“æ¬¡
8. **å®‰æ’æ—¥ç¨‹** â†’ æ‰¹é‡æ·»åŠ æ—¥ç¨‹
9. **ç”Ÿæˆç§©åºå†Œ** â†’ ä¸€é”®ç”Ÿæˆ Word æ–‡æ¡£

## ï¿½ è®¸å¯è¯

MIT License

---

**æœ€åæ›´æ–°**: 2025å¹´10æœˆ6æ—¥  
**ç‰ˆæœ¬**: 1.0.0
